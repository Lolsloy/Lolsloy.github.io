<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SetHub New Sets</title>
  <meta name="description" content="SetHub New Sets" />
  <meta name="theme-color" content="#0E141A" />
  <link rel="icon" type="image/png" href="Bilder/lagos.png" />

  <style>
    :root{
      --bg:#0E141A;
      --fg:#E6E9ED;
      --muted:#A6B0BA;

      --panel:rgba(15,22,30,.70);
      --glass:rgba(16,24,32,.65);
      --border:rgba(255,255,255,.10);

      --shadow:0 26px 90px rgba(0,0,0,.55);

      --r1:28px;
      --r2:18px;
      --r3:14px;

      --gap:16px;

      --pink:#cf64e5;
      --cyan:#00E5FF;

      --cardMediaRatio: 4 / 3;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--fg);
      background:var(--bg);
      min-height:100vh;
      overflow-x:hidden;
    }
    img{max-width:100%;display:block;height:auto}
    a{color:inherit;text-decoration:none}
    button,input{font:inherit}
    :focus-visible{
      outline:3px solid rgba(0,229,255,.55);
      outline-offset:3px;
      border-radius:12px;
    }

    header.site{
      position:fixed;
      left:0; right:0; top:0;
      height:78px;
      background:rgba(16,24,32,.65);
      backdrop-filter:blur(10px);
      border-bottom:1px solid rgba(15,26,34,.9);
      z-index:50;
    }
    .topbar-inner{
      height:100%;
      width:min(1240px,100%);
      margin:0 auto;
      padding:0 14px;
      display:grid;
      grid-template-columns:56px 1fr 56px;
      align-items:center;
    }
    .nav-brand{
      grid-column:2;
      justify-self:center;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:.6rem;
      min-width:0;
      transform:translateY(4px);
    }
    .logo-svg{width:100%;height:100%;display:block}
    .nav-logo{
      height:48px;
      width:auto;
      display:grid;
      place-items:center;
      transform:translateY(10px);
      flex:0 0 auto;
    }
    .nav-text{
      display:flex;
      align-items:center;
      gap:.15em;
      line-height:1;
      font-weight:900;
      letter-spacing:.04em;
      color:#fff;
      font-size:1.6rem;
      white-space:nowrap;
    }

    .burger{
      position:fixed;
      top:16px;
      left:14px;
      z-index:60;
      width:46px;
      height:46px;
      border-radius:12px;
      background:rgba(16,24,32,.7);
      border:1px solid rgba(31,42,53,.9);
      backdrop-filter:blur(10px);
      display:grid;
      place-items:center;
      cursor:pointer;
      transition:transform .12s ease, filter .12s ease;
    }
    .burger:hover{transform:translateY(-1px);filter:brightness(1.06)}
    .burger .lines{width:20px;height:14px;position:relative}
    .burger .lines span{
      position:absolute;left:0;right:0;
      height:2px;background:#e8eef4;border-radius:2px;
      transition:transform .25s ease, opacity .2s ease, top .25s ease;
    }
    .burger .lines span:nth-child(1){top:0}
    .burger .lines span:nth-child(2){top:6px}
    .burger .lines span:nth-child(3){top:12px}
    body.drawer-open .burger .lines span:nth-child(1){top:6px;transform:rotate(45deg)}
    body.drawer-open .burger .lines span:nth-child(2){opacity:0}
    body.drawer-open .burger .lines span:nth-child(3){top:6px;transform:rotate(-45deg)}

    .top-links{
      position:fixed;
      top:16px;
      left:68px;
      right:140px;
      z-index:59;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .top-link{
      height:46px;
      padding:0 14px;
      border-radius:12px;
      background:rgba(16,24,32,.7);
      border:1px solid rgba(31,42,53,.9);
      backdrop-filter:blur(10px);
      display:flex;
      align-items:center;
      gap:10px;
      cursor:pointer;
      user-select:none;
      font-weight:900;
      color:#fff;
      letter-spacing:.02em;
      white-space:nowrap;
      transition:transform .12s ease, filter .12s ease;
    }
    .top-link:hover{transform:translateY(-1px);filter:brightness(1.06)}
    .top-link span{color:#b7c2cc;font-weight:800}

    .top-icons{
      position:fixed;
      top:16px;
      right:14px;
      z-index:59;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .top-ic{
      height:46px;
      width:46px;
      border-radius:12px;
      background:rgba(16,24,32,.7);
      border:1px solid rgba(31,42,53,.9);
      backdrop-filter:blur(10px);
      display:grid;
      place-items:center;
      cursor:pointer;
      position:relative;
    }
    .top-ic:hover{background:rgba(19,32,42,.85)}
    .top-ic svg{width:20px;height:20px;color:#fff}

    .badgecount{
      position:absolute;
      right:-6px;
      top:-6px;
      min-width:20px;
      height:20px;
      padding:0 6px;
      border-radius:999px;
      background:rgba(207,100,229,.95);
      color:#fff;
      font-weight:900;
      font-size:.78rem;
      display:flex;
      align-items:center;
      justify-content:center;
      border:1px solid rgba(255,255,255,.12);
      box-shadow:0 10px 24px rgba(0,0,0,.45);
    }

    @media (max-width:720px){
      header.site{height:72px}
      .nav-logo{height:44px}
      .nav-text{font-size:1.45rem}
      .burger{width:44px;height:44px;top:14px}
      .top-links{top:14px;left:64px;right:118px;gap:8px}
      .top-link{height:44px;padding:0 12px}
      .top-link span{display:none}
      .top-icons{top:14px;right:14px;gap:8px}
      .top-ic{height:44px;width:44px}
    }
    @media (max-width:520px){
      .top-links{display:none}
      .top-icons{display:flex}
    }

    .drawer{
      position:fixed;
      top:0; left:0; bottom:0;
      width:min(320px,86vw);
      background:rgba(12,18,24,.98);
      border-right:1px solid rgba(22,33,42,.9);
      z-index:58;
      transform:translateX(-100%);
      transition:transform .32s ease;
      display:flex;
      flex-direction:column;
      padding:90px 18px 18px;
      gap:10px;
    }
    body.drawer-open .drawer{transform:translateX(0)}
    .drawer a{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:14px 14px;
      border-radius:12px;
      background:#0f1820;
      border:1px solid rgba(26,37,48,.9);
      font-weight:900;
      letter-spacing:.02em;
    }
    .drawer a:hover{background:#13202a}
    .drawer small{color:#94a3b8;font-weight:800}
    .drawer-backdrop{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.45);
      z-index:57;
      opacity:0;
      pointer-events:none;
      transition:opacity .25s ease;
    }
    body.drawer-open .drawer-backdrop{opacity:1;pointer-events:auto}

    main{
      padding:92px 5% 66px;
      width:min(1240px,100%);
      margin:0 auto;
    }
    @media (max-width:720px){ main{padding-top:84px} }
    @media (max-width:420px){ main{padding-inline:4%} }

    .panel{
      border-radius:var(--r1);
      background:
        radial-gradient(1200px 700px at 72% 22%, rgba(236,72,153,.18), transparent 70%),
        radial-gradient(1100px 650px at 78% 82%, rgba(59,130,246,.16), transparent 65%),
        var(--panel);
      border:1px solid rgba(34,48,65,.9);
      box-shadow:var(--shadow);
      padding:clamp(14px,2.2vw,20px);
    }

    .head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
    }
    .titleWrap{
      display:flex;
      flex-direction:column;
      gap:8px;
      min-width:220px;
    }
    .h1{
      font-weight:950;
      font-size:clamp(2.4rem,4.6vw,3.2rem);
      letter-spacing:.01em;
      line-height:1.02;
    }
    .metaLine{
      display:flex;
      align-items:center;
      gap:10px;
      color:var(--muted);
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      font-size:.82rem;
    }

    .tools{
      display:flex;
      align-items:center;
      gap:10px;
      flex:1 1 520px;
      justify-content:flex-end;
      flex-wrap:wrap;
    }

    .search{
      flex:1 1 360px;
      display:flex;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(16,24,32,.55);
      backdrop-filter:blur(10px);
      min-width:260px;
    }
    .search svg{width:18px;height:18px;color:#d7dde3;opacity:.92;flex:0 0 auto}
    .search input{
      width:100%;
      border:0;
      outline:none;
      background:transparent;
      color:#fff;
      font-weight:850;
      letter-spacing:.01em;
    }
    .search input::placeholder{color:rgba(183,194,204,.75)}

    .btn{
      height:46px;
      padding:0 14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(16,24,32,.55);
      backdrop-filter:blur(10px);
      color:#fff;
      font-weight:950;
      letter-spacing:.02em;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:10px;
      transition:transform .12s ease, filter .12s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{transform:translateY(-1px);filter:brightness(1.06)}
    .btn small{
      color:#b7c2cc;
      font-weight:900;
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:.78rem;
    }

    .divider{
      height:1px;
      background:rgba(255,255,255,.08);
      margin:18px 0 12px;
      border-radius:999px;
    }

    .grid{
      display:grid;
      gap:var(--gap);
      grid-template-columns:repeat(4, minmax(0, 1fr));
    }
    @media (max-width:1100px){
      .grid{grid-template-columns:repeat(3, minmax(0, 1fr))}
    }
    @media (max-width:820px){
      .grid{grid-template-columns:repeat(2, minmax(0, 1fr))}
    }
    @media (max-width:420px){
      :root{--gap:12px}
      .grid{gap:12px}
    }

    .card{
      border-radius:22px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(700px 420px at 12% -10%, rgba(0,229,255,.10), transparent 60%),
        radial-gradient(700px 520px at 92% 120%, rgba(207,100,229,.10), transparent 60%),
        rgba(12,18,24,.92);
      box-shadow:0 16px 70px rgba(0,0,0,.45);
      display:flex;
      flex-direction:column;
      min-height:320px;
      position:relative;
      transform:translateY(0);
      transition:transform .14s ease, filter .14s ease, border-color .14s ease;
    }
    .card:hover{transform:translateY(-2px);filter:brightness(1.03);border-color:rgba(255,255,255,.16)}

    .cardTop{
      position:absolute;
      left:12px;
      right:12px;
      top:12px;
      z-index:3;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      pointer-events:none;
    }
    .pill{
      pointer-events:auto;
      height:28px;
      padding:0 10px;
      border-radius:999px;
      background:rgba(16,24,32,.70);
      border:1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      font-weight:950;
      letter-spacing:.02em;
      font-size:.86rem;
      color:#fff;
      backdrop-filter:blur(10px);
      max-width:70%;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .wishBtn{
      pointer-events:auto;
      width:36px;
      height:36px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(16,24,32,.55);
      backdrop-filter:blur(10px);
      display:grid;
      place-items:center;
      cursor:pointer;
      transition:transform .12s ease, filter .12s ease;
    }
    .wishBtn:hover{transform:translateY(-1px);filter:brightness(1.06)}
    .wishBtn svg{width:18px;height:18px}
    .wishBtn[data-on="1"]{
      border-color:rgba(207,100,229,.60);
      background:rgba(122,59,208,.22);
    }
    .wishBtn[data-on="1"] svg{fill:var(--pink);stroke:var(--pink)}
    .wishBtn[data-on="0"] svg{fill:none;stroke:#fff}

    .media{
      width:100%;
      aspect-ratio:var(--cardMediaRatio);
      background:#fff;
      display:grid;
      place-items:center;
      overflow:hidden;
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .media img{
      width:100%;
      height:100%;
      object-fit:contain;
      object-position:center;
      padding:12px;
    }

    .body{
      padding:12px 14px 12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      flex:1 1 auto;
      min-height:0;
    }
    .name{
      font-weight:950;
      letter-spacing:.01em;
      line-height:1.15;
      font-size:1.05rem;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    .subline{
      color:rgba(215,221,227,.92);
      font-weight:900;
      letter-spacing:.02em;
      font-size:.95rem;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      margin-top:auto;
      padding-top:8px;
    }
    .subLeft{
      display:flex;
      gap:10px;
      align-items:baseline;
      min-width:0;
    }
    .price{
      font-weight:950;
      color:#fff;
    }
    .setno{
      color:rgba(183,194,204,.92);
      font-weight:950;
      white-space:nowrap;
    }

    .openBtn{
      width:38px;
      height:38px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(16,24,32,.40);
      display:grid;
      place-items:center;
      flex:0 0 auto;
      transition:transform .12s ease, filter .12s ease;
    }
    .openBtn svg{width:18px;height:18px;color:#fff}
    .card:hover .openBtn{transform:translateY(-1px);filter:brightness(1.06)}

    .pager{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-top:16px;
      flex-wrap:wrap;
    }
    .pagerLeft{
      display:flex;
      align-items:center;
      gap:10px;
      color:var(--muted);
      font-weight:950;
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:.82rem;
    }
    .pagerBtns{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .pbtn{
      height:42px;
      padding:0 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(16,24,32,.55);
      color:#fff;
      font-weight:950;
      cursor:pointer;
      transition:transform .12s ease, filter .12s ease, opacity .12s ease;
    }
    .pbtn:hover{transform:translateY(-1px);filter:brightness(1.06)}
    .pbtn:disabled{opacity:.45;cursor:default;transform:none;filter:none}
    .pageInfo{
      height:42px;
      padding:0 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(16,24,32,.35);
      color:#d7dde3;
      font-weight:950;
      display:flex;
      align-items:center;
      user-select:none;
      white-space:nowrap;
    }

    .skeleton{
      border-radius:22px;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(16,24,32,.35);
      min-height:320px;
    }

    .errorBox{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(16,24,32,.45);
      padding:14px;
      color:#d7dde3;
      font-weight:900;
      line-height:1.35;
    }
  </style>
</head>

<body>
  <button class="burger" id="burgerBtn" aria-label="Menü öffnen" type="button">
    <div class="lines" aria-hidden="true">
      <span></span><span></span><span></span>
    </div>
  </button>

  <div class="top-links" id="topLinks" aria-label="Quick Links">
    <a class="top-link" href="/news.html" aria-label="News">
      <strong>News</strong><span>Updates</span>
    </a>
    <a class="top-link" href="/events.html" aria-label="Events">
      <strong>Events</strong><span>Dates</span>
    </a>
    <a class="top-link" href="/sale.html" aria-label="Sale">
      <strong>Sale</strong><span>Deals</span>
    </a>
  </div>

  <div class="top-icons" aria-label="Icons">
    <a class="top-ic" href="/wishlist.html" aria-label="Wishlist">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 21s-7-4.6-9.3-9C1.3 9 3.2 6 6.5 6c1.9 0 3.2 1 3.9 2c.7-1 2-2 3.9-2C17.6 6 19.5 9 21.3 12c-2.3 4.4-9.3 9-9.3 9Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
      </svg>
      <div class="badgecount" id="wishBadgeTop" hidden>0</div>
    </a>
  </div>

  <nav class="drawer" id="drawer" aria-label="Menü">
    <a href="/index.html" class="drawer-link">Homepage <small>Start</small></a>
    <a href="/news.html" class="drawer-link">News <small>Updates</small></a>
    <a href="/events.html" class="drawer-link">Events <small>Dates</small></a>
    <a href="/newsets.html" class="drawer-link">New-Sets <small>New-Sets</small></a>
    <a href="/sale.html" class="drawer-link">Sale <small>Deals</small></a>
    <a href="/wishlist.html" class="drawer-link">Wishlist <small>Saved</small></a>
    <a href="#impressum" class="drawer-link">Impressum <small>Legal</small></a>
    <button class="drawer-link" id="loginOpenDrawer" type="button">Anmelden <small>Google</small></button>
  </nav>
  <div class="drawer-backdrop" id="drawerBackdrop" aria-hidden="true"></div>

  <svg width="0" height="0" style="position:absolute;left:-9999px;top:-9999px" aria-hidden="true" focusable="false">
    <symbol id="sethub-logo" viewBox="0 0 3326 2408" preserveAspectRatio="xMidYMid meet">
      <defs>
        <g id="logo-geometry">
          <g id="Ebene_3">
            <path fill="#04d5eb" fill-rule="evenodd" d="M1421.54,318.24c22.25,62.73,139.85,77.99,200.88,77.76,17.07-.06,161.51-2.01,187.92-71.28,7.3-19.15,6.91-46.93,6.48-77.76-.45-31.95-.57-47.96-5.79-61.91-24.9-66.46-125.71-83.15-149.73-87.13-16.28-2.7-49.47-6.7-90.72,0-27.93,4.54-123.89,20.12-149.04,84.24-6.27,16-6.23,32.31-6.48,64.8-.17,22.34-.39,51.9,6.48,71.28ZM1434.5,208.08c0-48.05,91.62-90.72,184.74-90.72s178.14,42.67,178.14,90.72-91.62,97.2-184.74,97.2-178.14-49.15-178.14-97.2Z"></path>
            <path fill="#04d5eb" fill-rule="evenodd" d="M1826.54,534.24c22.25,62.73,139.85,77.99,200.88,77.76,17.07-.06,161.51-2.01,187.92-71.28,7.3-19.15,6.91-46.93,6.48-77.76-.45-31.95-.57-47.96-5.79-61.91-24.9-66.46-125.71-83.15-149.73-87.13-16.28-2.7-49.47-6.7-90.72,0-27.93,4.54-123.89,20.12-149.04,84.24-6.27,16-6.23,32.31-6.48,64.8-.17,22.34-.39,51.9,6.48,71.28ZM1839.5,424.08c0-48.05,91.62-90.72,184.74-90.72s178.14,42.67,178.14,90.72-91.62,97.2-184.74,97.2-178.14-49.15-178.14-97.2Z"></path>
            <path fill="#04d5eb" fill-rule="evenodd" d="M1421.54,799.99c22.25,62.73,139.85,77.99,200.88,77.76,17.07-.06,161.51-2.01,187.92-71.28,7.3-19.15,6.91-46.93,6.48-77.76-.45-31.95-.57-47.96-5.79-61.91-24.9-66.46-125.71-83.15-149.73-87.13-16.28-2.7-49.47-6.7-90.72,0-27.93,4.54-123.89,20.12-149.04,84.24-6.27,16-6.23,32.31-6.48,64.8-.17,22.34-.39,51.9,6.48,71.28ZM1434.5,689.83c0-48.05,91.62-90.72,184.74-90.72s178.14,42.67,178.14,90.72-91.62,97.2-184.74,97.2-178.14-49.15-178.14-97.2Z"></path>
            <path fill="#04d5eb" fill-rule="evenodd" d="M1019.52,534.24c22.25,62.73,139.85,77.99,200.88,77.76,17.07-.06,161.51-2.01,187.92-71.28,7.3-19.15,6.91-46.93,6.48-77.76-.45-31.95-.57-47.96-5.79-61.91-24.9-66.46-125.71-83.15-149.73-87.13-16.28-2.7-49.47-6.7-90.72,0-27.93,4.54-123.89,20.12-149.04,84.24-6.27,16-6.23,32.31-6.48,64.8-.17,22.34-.39,51.9,6.48,71.28ZM1032.48,424.08c0-48.05,91.62-90.72,184.74-90.72s178.14,42.67,178.14,90.72-91.62,97.2-184.74,97.2-178.14-49.15-178.14-97.2Z"></path>
          </g>
          <g id="Ebene_5">
            <path fill="#04d5eb" d="M1586,1605l-765-450v-585l765,459v576Z"></path>
            <path fill="#04d5eb" d="M1640,1605l765-450v-585l-765,459v576Z"></path>
          </g>
        </g>

        <mask id="logoMask" maskUnits="userSpaceOnUse" x="0" y="0" width="3326" height="2408">
          <use href="#logo-geometry"></use>
        </mask>

        <linearGradient id="gradA" x1="-20%" y1="0%" x2="120%" y2="0%" spreadMethod="reflect">
          <stop offset="0%">
            <animate attributeName="stop-color" dur="12s" repeatCount="indefinite"
              values="#00E5FF; #FF5EA0; #FFD300; #00FF87; #00E5FF"></animate>
          </stop>
          <stop offset="50%">
            <animate attributeName="stop-color" dur="12s" repeatCount="indefinite"
              values="#7A5CFF; #00FF87; #FF5EA0; #00E5FF; #7A5CFF"></animate>
          </stop>
          <stop offset="100%">
            <animate attributeName="stop-color" dur="12s" repeatCount="indefinite"
              values="#FF5EA0; #FFD300; #00E5FF; #7A5CFF; #FF5EA0"></animate>
          </stop>
          <animateTransform attributeName="gradientTransform" type="translate" dur="12s"
            repeatCount="indefinite" values="-0.4 0; 0.4 0; -0.4 0"></animateTransform>
        </linearGradient>
      </defs>

      <g mask="url(#logoMask)">
        <rect x="0" y="0" width="3326" height="2408" fill="url(#gradA)"></rect>
      </g>
    </symbol>
  </svg>

  <header class="site" aria-label="Navigation">
    <div class="topbar-inner">
      <div class="nav-brand">
        <div class="nav-logo" aria-hidden="true">
          <svg class="logo-svg" viewBox="0 0 3326 2408" preserveAspectRatio="xMidYMid meet">
            <use href="#sethub-logo"></use>
          </svg>
        </div>
        <div class="nav-text" aria-label="SetHub">
          <span>S</span><span>e</span><span>t</span><span>H</span><span>u</span><span>b</span>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="panel">
      <div class="head">
        <div class="titleWrap">
          <div class="h1">New Sets</div>
          <div class="metaLine">
            <span id="itemsMeta">0 items</span>
            <span id="pageMeta">Seite 1</span>
          </div>
        </div>

        <div class="tools">
          <div class="search">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/>
              <path d="M16.5 16.5 21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <input id="q" type="search" placeholder="Search name, theme, number" autocomplete="off" />
          </div>

          <button class="btn" id="sortBtn" type="button">
            Sort <small id="sortLabel">New</small>
          </button>

          <button class="btn" id="reloadBtn" type="button">
            Reload <small id="reloadCount">0</small>
          </button>
        </div>
      </div>

      <div class="divider"></div>

      <div class="grid" id="grid" aria-label="Sets Grid"></div>

      <div class="pager" aria-label="Pagination">
        <div class="pagerLeft" id="rangeMeta">0–0</div>

        <div class="pagerBtns">
          <button class="pbtn" id="prevPage" type="button">Prev</button>
          <div class="pageInfo" id="pageInfo">Seite 1 von 1</div>
          <button class="pbtn" id="nextPage" type="button">Next</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    const SETS_API_URL = "https://sethub.ddnsfree.com/NewSetsScraper/api/LegoProducts/"
    const FALLBACK_IMG = "/Bilder/real1.png"
    const PAGE_SIZE = 28

    const LS_WISH_KEYS = "sethub_wishlist"
    const LS_WISH_ITEMS = "sethub_wishlist_items"

    const burgerBtn = document.getElementById("burgerBtn")
    const drawerBackdrop = document.getElementById("drawerBackdrop")
    const wishBadgeTop = document.getElementById("wishBadgeTop")

    function openDrawer(){ document.body.classList.add("drawer-open") }
    function closeDrawer(){ document.body.classList.remove("drawer-open") }

    burgerBtn.addEventListener("click", () => {
      document.body.classList.contains("drawer-open") ? closeDrawer() : openDrawer()
    })
    drawerBackdrop.addEventListener("click", closeDrawer)
    document.querySelectorAll(".drawer-link").forEach(a => a.addEventListener("click", closeDrawer))
    addEventListener("keydown", e => { if(e.key === "Escape") closeDrawer() })

    function safeText(s){
      return String(s || "").replaceAll("<","").replaceAll(">","")
    }

    function escapeHtml(str){
      const s = String(str ?? "")
      return s
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;")
    }

    function firstText(o, keys){
      for(const k of keys){
        const v = o && o[k]
        if(v !== undefined && v !== null && String(v).trim() !== "") return String(v)
      }
      return ""
    }

    function asNumber(x){
      const n = Number(String(x || "").replace(",", ".").replace(/[^\d.]/g,""))
      return Number.isFinite(n) ? n : null
    }

    function formatEUR(n){
      try{
        return new Intl.NumberFormat("de-DE", { style:"currency", currency:"EUR" }).format(n)
      }catch{
        return (Math.round(n * 100) / 100).toFixed(2) + " €"
      }
    }

    function formatPrice(p){
      const n = asNumber(p)
      if(n === null) return ""
      return formatEUR(n)
    }

    function ensureArrayFromApi(data){
      if(Array.isArray(data)) return data
      if(data && Array.isArray(data.$values)) return data.$values
      if(data && Array.isArray(data.items)) return data.items
      if(data && Array.isArray(data.data)) return data.data
      if(data && Array.isArray(data.results)) return data.results
      if(data && Array.isArray(data.value)) return data.value
      return []
    }

    function withTimeout(ms){
      const controller = new AbortController()
      const t = setTimeout(() => controller.abort(), ms)
      return { signal: controller.signal, clear: () => clearTimeout(t) }
    }

    async function fetchJson(url){
      const { signal, clear } = withTimeout(14000)
      let res
      try{
        res = await fetch(url, {
          method:"GET",
          mode:"cors",
          cache:"no-store",
          headers:{ "Accept":"application/json" },
          signal
        })
      } finally {
        clear()
      }
      if(!res.ok) throw new Error("HTTP " + res.status)
      return await res.json()
    }

    function normalizeItem(raw){
      const name = safeText(firstText(raw, ["name","title","setName","productName"]) || "Set")
      const setNumber = safeText(firstText(raw, ["setNumber","number","id","setId"]) || "")
      const theme = safeText(firstText(raw, ["theme","category","line"]) || "")
      const priceRaw = firstText(raw, ["price","msrp","eurPrice","priceEur"]) || ""
      const price = formatPrice(priceRaw)
      const img = firstText(raw, ["imageUrl","image","img","thumbnail","picture","imageURL"]) || FALLBACK_IMG
      const url = firstText(raw, ["productUrl","url","link","sourceUrl"]) || "#"
      const date = firstText(raw, ["publishedAt","date","createdAt","releaseDate"]) || ""
      const search = (name + " " + theme + " " + setNumber).toLowerCase()

      return { name,setNumber,theme,price,img,url,date,raw,search }
    }

    function loadWishlistKeys(){
      try{
        const x = JSON.parse(localStorage.getItem(LS_WISH_KEYS) || "[]")
        if(Array.isArray(x)) return new Set(x.map(String))
        return new Set()
      }catch{
        return new Set()
      }
    }

    function loadWishlistItems(){
      try{
        const x = JSON.parse(localStorage.getItem(LS_WISH_ITEMS) || "{}")
        if(x && typeof x === "object") return x
        return {}
      }catch{
        return {}
      }
    }

    function saveWishlist(keys, items){
      localStorage.setItem(LS_WISH_KEYS, JSON.stringify([...keys]))
      localStorage.setItem(LS_WISH_ITEMS, JSON.stringify(items))
      updateWishUI(keys)
    }

    function updateWishUI(keysSet){
      const keys = keysSet || loadWishlistKeys()
      const n = keys.size

      if(wishBadgeTop){
        wishBadgeTop.textContent = String(n)
        wishBadgeTop.hidden = n <= 0
      }

      document.querySelectorAll(".wishBtn").forEach(btn => {
        const id = btn.getAttribute("data-id") || ""
        const on = keys.has(id)
        btn.setAttribute("data-on", on ? "1" : "0")
        btn.setAttribute("aria-pressed", on ? "true" : "false")
      })
    }

    function makeWishSnapshot(x){
      const key = (x.setNumber || x.name || "").trim() || ("fallback:" + (x.url || x.name))
      const priceNum = asNumber(x.price)

      return {
        key,
        setNumber: (x.setNumber || "").trim(),
        name: x.name || "Set",
        image: x.img || "",
        best: (priceNum !== null && x.url && x.url !== "#")
          ? { source:"lego", price: priceNum, url: x.url }
          : null,
        bestSale: null,
        sources: {
          lego: (priceNum !== null && x.url && x.url !== "#")
            ? { name: x.name || "Set", image: x.img || "", url: x.url, price: priceNum, oldPrice: null, discountPct: null }
            : null,
          amazon: null,
          alternate: null
        },
        savedAt: Date.now()
      }
    }

    function toggleWishFromItem(item){
      const key = (item.setNumber || item.name || "").trim() || ("fallback:" + (item.url || item.name))
      const keys = loadWishlistKeys()
      const items = loadWishlistItems()

      if(keys.has(key)){
        keys.delete(key)
        delete items[key]
        saveWishlist(keys, items)
        return
      }

      keys.add(key)
      items[key] = makeWishSnapshot({ ...item, img:item.img || item.image || "" })
      saveWishlist(keys, items)
    }

    let all = []
    let filtered = []
    let page = 1
    let sortMode = "new"

    const grid = document.getElementById("grid")
    const q = document.getElementById("q")
    const itemsMeta = document.getElementById("itemsMeta")
    const pageMeta = document.getElementById("pageMeta")
    const rangeMeta = document.getElementById("rangeMeta")
    const pageInfo = document.getElementById("pageInfo")
    const prevPage = document.getElementById("prevPage")
    const nextPage = document.getElementById("nextPage")
    const sortBtn = document.getElementById("sortBtn")
    const sortLabel = document.getElementById("sortLabel")
    const reloadBtn = document.getElementById("reloadBtn")
    const reloadCount = document.getElementById("reloadCount")

    function byNew(a,b){
      const da = new Date(a.date || 0).getTime()
      const db = new Date(b.date || 0).getTime()
      if(db !== da) return db - da
      const na = Number(a.setNumber || 0)
      const nb = Number(b.setNumber || 0)
      return (Number.isFinite(nb) ? nb : 0) - (Number.isFinite(na) ? na : 0)
    }
    function byPrice(a,b){
      const pa = asNumber(a.price) ?? 0
      const pb = asNumber(b.price) ?? 0
      return pb - pa
    }
    function byNumber(a,b){
      const na = Number(a.setNumber || 0)
      const nb = Number(b.setNumber || 0)
      return (Number.isFinite(nb) ? nb : 0) - (Number.isFinite(na) ? na : 0)
    }

    function applyFilter(){
      const term = (q.value || "").trim().toLowerCase()
      filtered = term ? all.filter(x => x.search.includes(term)) : all.slice()

      if(sortMode === "new") filtered.sort(byNew)
      if(sortMode === "price") filtered.sort(byPrice)
      if(sortMode === "number") filtered.sort(byNumber)

      page = 1
      render()
    }

    function clampPage(){
      const totalPages = Math.max(1, Math.ceil(filtered.length / PAGE_SIZE))
      if(page < 1) page = 1
      if(page > totalPages) page = totalPages
      return totalPages
    }

    function buildCard(x){
      const href = x.url || "#"
      const title = x.name || "Set"
      const img = x.img || FALLBACK_IMG
      const price = x.price ? `${escapeHtml(x.price)}` : ""
      const setNumberTxt = x.setNumber ? `#${escapeHtml(x.setNumber)}` : ""

      const wishId = (x.setNumber || title).trim()

      return `
        <a class="card" href="${escapeHtml(href)}" target="_blank" rel="noopener" aria-label="${safeText(title)}">
          <div class="cardTop">
            <div class="pill">${escapeHtml(x.setNumber || "Set")}</div>
            <button class="wishBtn" type="button" data-id="${escapeHtml(wishId)}" aria-label="Wishlist" aria-pressed="false" data-on="0">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 21s-7-4.4-9.4-8.5C.8 9.2 2.7 6 6.2 6c2 0 3.2 1 3.8 2 .6-1 1.8-2 3.8-2 3.5 0 5.4 3.2 3.6 6.5C19 16.6 12 21 12 21Z" stroke-width="2" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>

          <div class="media">
            <img src="${escapeHtml(img)}" alt="${safeText(title)}" onerror="this.onerror=null;this.src='${FALLBACK_IMG}'">
          </div>

          <div class="body">
            <div class="name">${escapeHtml(title)}</div>

            <div class="subline">
              <div class="subLeft">
                <div class="price">${price}</div>
                <div class="setno">${setNumberTxt}</div>
              </div>
              <div class="openBtn" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M7 17L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M9 7h8v8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
            </div>
          </div>
        </a>
      `
    }

    function wireWishlistButtons(){
      grid.querySelectorAll(".wishBtn").forEach(btn => {
        btn.addEventListener("click", (e) => {
          e.preventDefault()
          e.stopPropagation()

          const id = btn.getAttribute("data-id") || ""
          if(!id) return

          const card = btn.closest(".card")
          if(!card) return

          const href = card.getAttribute("href") || "#"
          const titleEl = card.querySelector(".name")
          const imgEl = card.querySelector(".media img")
          const pillEl = card.querySelector(".pill")
          const priceEl = card.querySelector(".price")

          const item = {
            name: titleEl ? titleEl.textContent.trim() : "Set",
            setNumber: pillEl ? pillEl.textContent.trim() : "",
            img: imgEl ? (imgEl.getAttribute("src") || "") : "",
            url: href,
            price: priceEl ? priceEl.textContent.trim() : "",
            date: ""
          }

          toggleWishFromItem(item)
        })
      })

      updateWishUI()
    }

    function render(){
      const totalPages = clampPage()
      const total = filtered.length

      const start = (page - 1) * PAGE_SIZE
      const end = Math.min(total, start + PAGE_SIZE)
      const slice = filtered.slice(start, end)

      itemsMeta.textContent = `${total} items`
      pageMeta.textContent = `Seite ${page}`
      rangeMeta.textContent = `${start + (total ? 1 : 0)}–${end}`
      pageInfo.textContent = `Seite ${page} von ${totalPages}`

      prevPage.disabled = page <= 1
      nextPage.disabled = page >= totalPages

      grid.innerHTML = slice.length ? slice.map(buildCard).join("") : `<div class="errorBox">Keine Daten</div>`
      wireWishlistButtons()
    }

    prevPage.addEventListener("click", () => { page -= 1; render() })
    nextPage.addEventListener("click", () => { page += 1; render() })
    q.addEventListener("input", () => applyFilter())

    sortBtn.addEventListener("click", () => {
      if(sortMode === "new"){ sortMode = "number"; sortLabel.textContent = "Number"; applyFilter(); return }
      if(sortMode === "number"){ sortMode = "price"; sortLabel.textContent = "Price"; applyFilter(); return }
      sortMode = "new"
      sortLabel.textContent = "New"
      applyFilter()
    })

    async function load(){
      grid.innerHTML = `
        <div class="skeleton"></div><div class="skeleton"></div><div class="skeleton"></div><div class="skeleton"></div>
        <div class="skeleton"></div><div class="skeleton"></div><div class="skeleton"></div><div class="skeleton"></div>
      `

      const data = await fetchJson(SETS_API_URL)
      const list = ensureArrayFromApi(data)

      const norm = list.map(normalizeItem)

      const seen = new Set()
      all = []
      for(const it of norm){
        const key = (it.setNumber || it.name).trim()
        if(!key) continue
        if(seen.has(key)) continue
        seen.add(key)
        all.push(it)
      }

      all.sort(byNew)
      reloadCount.textContent = String(all.length)

      applyFilter()
      updateWishUI()
    }

    function showError(msg){
      grid.innerHTML = `<div class="errorBox">${safeText(msg)}</div>`
      all = []
      filtered = []
      reloadCount.textContent = "0"
      applyFilter()
      updateWishUI()
    }

    reloadBtn.addEventListener("click", () => {
      load().catch(err => {
        console.error(err)
        showError("Fehler beim Laden. Schau in die Browser Console. CORS oder JSON Format")
      })
    })

    load().catch(err => {
      console.error(err)
      showError("Fehler beim Laden. Schau in die Browser Console. CORS oder JSON Format")
    })

    updateWishUI()
  </script>
</body>
</html>
